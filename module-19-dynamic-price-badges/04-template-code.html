<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Price Badges - Template Code</title>
</head>
<body>

<!-- MODULE: Dynamic Price Badges - TEMPLATE VERSION -->
<div class="dynamic-price-module"><div class="product-price-badges"><div class="product-top-line"><span class="product-discount" id="discount-badge"></span><span class="product-old" id="compare-price"></span><span class="product-new" id="current-price"></span></div><div class="product-cart-badge" id="cart-badge"></div></div></div><style>*{box-sizing:border-box;margin:0;padding:0}.dynamic-price-module{width:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}.product-price-badges{max-width:${max_container_width};width:100%}.product-top-line{display:flex;align-items:center;gap:${top_line_gap};flex-wrap:nowrap}.product-discount{background-color:${discount_badge_bg_color};color:${discount_badge_text_color};font-weight:600;padding:4px 8px;border-radius:${badge_border_radius};font-size:12px;flex-shrink:0}.product-old{color:${old_price_color};text-decoration:line-through;font-size:14px;flex-shrink:0}.product-new{color:${new_price_color};font-weight:700;font-size:18px}.product-cart-badge{background-color:${discount_badge_bg_color};color:${discount_badge_text_color};font-weight:600;padding:6px 10px;border-radius:6px;font-size:13px;margin-top:8px;text-align:left;line-height:1;white-space:nowrap;display:inline-block}.product-cart-badge.hidden{display:none}@media (max-width:480px){.product-top-line{gap:5px}.product-discount{font-size:11px;padding:3px 6px}.product-old{font-size:12px}.product-new{font-size:15px}.product-cart-badge{font-size:12px;padding:5px 8px;border-radius:5px}}</style><script>function initDynamicPriceBadges(){const config={cartDiscountPercent:${cart_extra_discount_percent},cartDiscountMessage:'${cart_discount_message}',cartDiscountSuffix:'${cart_discount_suffix}',showCartBadge:${show_cart_badge},currencySymbol:'${currency_symbol}',discountBadgeId:'discount-badge',comparePriceId:'compare-price',currentPriceId:'current-price',cartBadgeId:'cart-badge'};const discountBadge=document.getElementById(config.discountBadgeId);const comparePriceEl=document.getElementById(config.comparePriceId);const currentPriceEl=document.getElementById(config.currentPriceId);const cartBadgeEl=document.getElementById(config.cartBadgeId);if(!discountBadge||!comparePriceEl||!currentPriceEl||!cartBadgeEl){console.error('Price badge elements not found');return}function formatPrice(price,currency=config.currencySymbol){return `${currency}${price.toFixed(2)}`}function calculateDiscountPercent(comparePrice,currentPrice){if(!comparePrice||comparePrice<=0||currentPrice>=comparePrice){return 0}const discount=((comparePrice-currentPrice)/comparePrice)*100;return Math.round(discount)}function calculateCartPrice(currentPrice,cartDiscountPercent){const finalPrice=currentPrice*(1-cartDiscountPercent/100);return finalPrice}function fetchProductDataFromPage(){if(typeof window.ShopifyAnalytics!=='undefined'&&window.ShopifyAnalytics.meta){const product=window.ShopifyAnalytics.meta.product;if(product&&product.variants&&product.variants[0]){return{currentPrice:product.variants[0].price/100,compareAtPrice:product.variants[0].compare_at_price?product.variants[0].compare_at_price/100:null}}}if(typeof window.product!=='undefined'&&window.product){return{currentPrice:window.product.price?window.product.price/100:null,compareAtPrice:window.product.compare_at_price?window.product.compare_at_price/100:null}}const priceMetaTag=document.querySelector('meta[property="product:price:amount"]');const comparePriceMetaTag=document.querySelector('meta[property="product:compare_at_price"]');if(priceMetaTag){return{currentPrice:parseFloat(priceMetaTag.getAttribute('content')),compareAtPrice:comparePriceMetaTag?parseFloat(comparePriceMetaTag.getAttribute('content')):null}}const productEl=document.querySelector('[data-product-price]');if(productEl){return{currentPrice:parseFloat(productEl.getAttribute('data-product-price')),compareAtPrice:productEl.getAttribute('data-compare-price')?parseFloat(productEl.getAttribute('data-compare-price')):null}}return null}const productData=fetchProductDataFromPage();let currentPrice,compareAtPrice;if(productData&&productData.currentPrice){currentPrice=productData.currentPrice;compareAtPrice=productData.compareAtPrice||null}else{currentPrice=108.49;compareAtPrice=154.99;console.log('Dynamic Price Badges: Using demo prices for preview')}const discountPercent=calculateDiscountPercent(compareAtPrice,currentPrice);if(discountPercent>0&&compareAtPrice){discountBadge.textContent=`-${discountPercent}%`;comparePriceEl.textContent=formatPrice(compareAtPrice,config.currencySymbol)}else{discountBadge.style.display='none';comparePriceEl.style.display='none'}currentPriceEl.textContent=formatPrice(currentPrice,config.currencySymbol);if(config.showCartBadge&&config.cartDiscountPercent>0){const cartFinalPrice=calculateCartPrice(currentPrice,config.cartDiscountPercent);const cartBadgeText=`${config.cartDiscountMessage} ${config.cartDiscountPercent}% ${config.cartDiscountSuffix} ${formatPrice(cartFinalPrice,config.currencySymbol)}`;cartBadgeEl.textContent=cartBadgeText}else{cartBadgeEl.classList.add('hidden')}}document.addEventListener('DOMContentLoaded',initDynamicPriceBadges);</script>

</body>
</html>
